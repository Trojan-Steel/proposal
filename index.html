<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tonnage Bucket Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <button id="resetProjectSideBtn" type="button" class="project-clear-rail"><span class="project-clear-label">CLEAR</span></button>
    <main class="container">
      <header class="global-header">
        <div id="projectNameDisplay" class="project-display">PROJECT</div>
        <div class="header-right">
          <img
            class="global-logo"
            src="https://d9hhrg4mnvzow.cloudfront.net/www.trojansteel.com/d07dbeed-brandmark-design-transparent_10ca036000000000000028.png"
            alt="Trojan Steel"
          />
          <button id="adminOpenButton" type="button" class="admin-link">ADMIN</button>
        </div>
      </header>
      <nav id="mainTabsNav" class="main-tabs-nav" aria-label="Main Navigation">
        <button type="button" class="main-tab-button" data-main-tab="project"><span class="main-tab-label">INPUT</span></button>
        <button type="button" class="main-tab-button hidden" data-main-tab="takeoff"><span class="main-tab-label">TAKEOFF</span></button>
        <button type="button" class="main-tab-button" data-main-tab="deck"><span class="main-tab-label">DECK</span></button>
        <button type="button" class="main-tab-button" data-main-tab="joist"><span class="main-tab-label">JOIST</span></button>
        <button type="button" class="main-tab-button" data-main-tab="pricing"><span class="main-tab-label">PRICING</span></button>
      </nav>

      <section id="page-project" class="wizard-page">
        <section class="card" aria-labelledby="project-page-heading">
          <h1 id="project-page-heading">TROJAN PROPOSAL</h1>

          <div class="field-group">
            <label for="projectNameInput">Project Name</label>
            <input id="projectNameInput" type="text" placeholder="Enter project name" />
          </div>

          <div class="field-group">
            <label for="projectLocationInput">Project Location</label>
            <input
              id="projectLocationInput"
              class="location-pill-input"
              type="text"
              autocomplete="street-address"
              placeholder="Enter address or city"
            />
          </div>

          <div class="field-group">
            <label for="takeoffByTrojanInput">Takeoff by Trojan</label>
            <select id="takeoffByTrojanInput">
              <option value="YES">Yes</option>
              <option value="NO">No</option>
            </select>
          </div>

          <div class="field-group">
            <label for="cutListProvidedInput">Cut List Provided</label>
            <select id="cutListProvidedInput">
              <option value="YES">Yes</option>
              <option value="NO" selected>No</option>
            </select>
          </div>

          <div class="field-group">
            <label for="specsReviewedInput">Specs Reviewed</label>
            <select id="specsReviewedInput">
              <option value="YES">Yes</option>
              <option value="NO" selected>No</option>
            </select>
          </div>

          <div class="field-group">
            <label for="projectComplexityInput">Project Complexity</label>
            <select id="projectComplexityInput">
              <option value="1">Tier 1: Simple</option>
              <option value="2" selected>Tier 2: Basic</option>
              <option value="3">Tier 3: Complex</option>
            </select>
          </div>

          <div class="wizard-nav-row">
            <button id="projectNextButton" type="button" class="btn-primary">Next</button>
          </div>
        </section>
      </section>

      <section id="page-takeoff" class="wizard-page hidden">
        <section class="card" aria-labelledby="takeoff-page-heading">
          <h1 id="takeoff-page-heading">MATERIAL TAKEOFF</h1>
          <div class="takeoff-meta-grid">
            <div class="field-group">
              <label for="takeoffBidNoInput">Bid No</label>
              <input id="takeoffBidNoInput" type="text" />
            </div>
            <div class="field-group">
              <label for="takeoffJobNumberInput">Job Number</label>
              <input id="takeoffJobNumberInput" type="text" />
            </div>
            <div class="field-group">
              <label for="takeoffJobNameInput">Job Name</label>
              <input id="takeoffJobNameInput" type="text" />
            </div>
            <div class="field-group">
              <label for="takeoffProjectLocationInput">Project Location</label>
              <input id="takeoffProjectLocationInput" type="text" autocomplete="street-address" placeholder="" />
            </div>
          </div>
          <div id="takeoffAreasList" class="takeoff-areas-list"></div>
          <div class="takeoff-actions-row">
            <button id="takeoffAddAreaButton" type="button" class="btn-add-profile">+ ADD TO AREA</button>
            <button id="takeoffDoneButton" type="button" class="btn-done-accordions hidden">DONE</button>
          </div>
        </section>
      </section>

      <section id="page-deck" class="wizard-page hidden">
        <section class="card deck-model-card" aria-labelledby="deck-page-heading">
          <h1 id="deck-page-heading" class="deck-page-title">DECK</h1>

          <div id="deckProfilesList" class="deck-profiles-list" aria-live="polite"></div>

          <dialog id="duplicateProfileDialog" class="duplicate-dialog">
            <form method="dialog" class="duplicate-dialog-form">
              <h3>Duplicate Profile</h3>
              <div class="field-group">
                <label for="duplicateProfileSelect">Select Profile</label>
                <select id="duplicateProfileSelect"></select>
              </div>
              <div class="duplicate-dialog-actions">
                <button type="button" id="duplicateCancelButton">Cancel</button>
                <button type="button" id="duplicateConfirmButton">Duplicate</button>
              </div>
            </form>
          </dialog>

          <div class="totals-summary-block">
            <div class="totals-summary-row">
              <label for="totalDeckSqsOutput">Total SQS</label>
              <input id="totalDeckSqsOutput" type="text" readonly value="0.00" />
            </div>
            <div class="totals-summary-row">
              <label for="totalDeckTonsOutput">Total Tons</label>
              <input id="totalDeckTonsOutput" type="text" readonly value="0.00" />
            </div>
            <div class="totals-summary-row">
              <label for="deckTrojanTonsOutput">Trojan Deck Tons</label>
              <input id="deckTrojanTonsOutput" type="text" readonly value="0.00" />
            </div>
            <div class="totals-summary-row">
              <label for="deckBrokeredTonsOutput">Brokered Deck Tons</label>
              <input id="deckBrokeredTonsOutput" type="text" readonly value="0.00" />
            </div>
            <div class="totals-summary-row">
              <label for="deckTotalOutput">Total Price</label>
              <input id="deckTotalOutput" type="text" readonly value="$0.00" />
            </div>
          </div>

          <div class="wizard-nav-row">
            <button id="deckBackButton" type="button" class="btn-secondary">Back</button>
            <button id="deckNextButton" type="button" class="btn-primary">NEXT: JOIST</button>
          </div>
        </section>
      </section>

      <section id="page-joist" class="wizard-page hidden">
        <section class="card" aria-labelledby="joist-page-heading">
          <h1 id="joist-page-heading">JOIST INPUTS</h1>

          <div class="field-group">
            <label for="supplierInput">Supplier</label>
            <select id="supplierInput">
              <option value="CSC" selected>CSC</option>
              <option value="CANO">CANO</option>
            </select>
          </div>

          <div id="joistItemsList" class="deck-profiles-list" aria-live="polite"></div>

          <div class="deck-actions-row">
            <button id="addJoistButton" type="button" class="btn-add-profile">+ Add Joist</button>
            <button id="joistReviewButton" type="button" class="btn-done-accordions hidden">REVIEW</button>
          </div>
          <div id="joistReviewSummary" class="hidden"></div>

          <div class="wizard-nav-row">
            <button id="joistBackButton" type="button" class="btn-secondary">Back</button>
            <button id="joistNextButton" type="button" class="btn-primary">NEXT: PRICING</button>
          </div>
        </section>
      </section>

      <section id="page-pricing" class="wizard-page hidden">
        <section class="card" aria-labelledby="pricing-page-heading">
          <div class="pricing-tools-row">
            <button
              id="pricingProposalButton"
              type="button"
              class="btn-secondary"
              onclick="window.openProposalGenerator && window.openProposalGenerator()"
            >
              Generate Proposal PDF
            </button>
          </div>
          <div class="pricing-heading-row">
            <h1 id="pricing-page-heading">PRICING</h1>
            <button id="pricingOptimizeButton" type="button" class="btn-pricing-optimize" aria-label="Optimize">&#x26A1;&#xFE0E;</button>
          </div>
          <div id="pricingOptimizeResults" class="pricing-optimize-results hidden"></div>

          <section id="pricingTrojanDeckSection" class="pricing-accordion-section">
            <div
              class="pricing-accordion-header"
              data-action="toggle-pricing-section"
              data-pricing-section="trojanDeck"
              role="button"
              tabindex="0"
              aria-expanded="true"
            >
              <span class="deck-summary-toggle" aria-hidden="true">−</span>
              <span class="deck-summary-name pricing-header-name">TROJAN DECK</span>
              <span id="pricingTrojanHeaderCogs" class="pricing-header-cogs"></span>
            </div>
            <div id="pricingTrojanDeckContent" class="pricing-accordion-content">
              <div id="pricingTrojanDeckSchedule"></div>
            </div>
          </section>

          <section id="pricingAccessoriesSection" class="pricing-accordion-section">
            <div
              class="pricing-accordion-header"
              data-action="toggle-pricing-section"
              data-pricing-section="accessories"
              role="button"
              tabindex="0"
              aria-expanded="true"
            >
              <span class="deck-summary-toggle" aria-hidden="true">−</span>
              <span class="deck-summary-name pricing-header-name">ACCESSORIES</span>
              <span id="pricingAccessoriesHeaderCogs" class="pricing-header-cogs"></span>
            </div>
            <div id="pricingAccessoriesContent" class="pricing-accordion-content">
              <div id="pricingAccessoriesSchedule"></div>
            </div>
          </section>

          <section id="pricingBrokeredDeckSection" class="pricing-accordion-section">
            <div
              class="pricing-accordion-header"
              data-action="toggle-pricing-section"
              data-pricing-section="brokeredDeck"
              role="button"
              tabindex="0"
              aria-expanded="true"
            >
              <span class="deck-summary-toggle" aria-hidden="true">−</span>
              <span id="pricingBrokeredDeckName" class="deck-summary-name pricing-header-name">SUPPLIER DECK</span>
              <span id="pricingBrokeredHeaderCogs" class="pricing-header-cogs"></span>
            </div>
            <div id="pricingBrokeredDeckContent" class="pricing-accordion-content">
              <div id="pricingBrokeredDeckSchedule"></div>
            </div>
          </section>

          <section id="pricingJoistsSection" class="pricing-accordion-section">
            <div
              class="pricing-accordion-header"
              data-action="toggle-pricing-section"
              data-pricing-section="joists"
              role="button"
              tabindex="0"
              aria-expanded="true"
            >
              <span class="deck-summary-toggle" aria-hidden="true">−</span>
              <span id="pricingJoistsName" class="deck-summary-name pricing-header-name">JOISTS</span>
              <span id="pricingJoistsHeaderCogs" class="pricing-header-cogs"></span>
            </div>
            <div id="pricingJoistsContent" class="pricing-accordion-content">
              <div id="pricingJoistVendorSchedule"></div>
            </div>
          </section>

          <section id="pricingDetailingSection" class="pricing-accordion-section">
            <div
              class="pricing-accordion-header"
              data-action="toggle-pricing-section"
              data-pricing-section="detailing"
              role="button"
              tabindex="0"
              aria-expanded="true"
            >
              <span class="deck-summary-toggle" aria-hidden="true">−</span>
              <span class="deck-summary-name pricing-header-name">DETAILING</span>
              <span id="pricingDetailingHeaderCogs" class="pricing-header-cogs"></span>
            </div>
            <div id="pricingDetailingContent" class="pricing-accordion-content">
              <div id="pricingDetailingSchedule"></div>
            </div>
          </section>

          <div class="pricing-project-summary">
            <div class="pricing-line-item">
              <div class="pricing-line-item-main">
                <span>SUBTOTAL</span>
                <strong id="pricingSubtotalOutput">$0.00</strong>
              </div>
            </div>
            <div class="pricing-line-item">
              <div class="pricing-line-item-main">
                <span>FINAL PROJECT PRICE</span>
                <strong id="pricingProjectTotalCostOutput">$0.00</strong>
              </div>
            </div>
            <div id="pricingMarginSummaryOutput"></div>
          </div>

          <div class="wizard-nav-row">
            <button id="pricingBackButton" type="button" class="btn-secondary">Back</button>
            <button id="resetProjectBtn" type="button" class="btn-secondary">NEW PROJECT</button>
            <button id="pricingStartButton" type="button" class="btn-subtle"></button>
          </div>
        </section>
      </section>

      <section id="page-admin" class="wizard-page hidden">
        <section class="card" aria-labelledby="admin-page-heading">
          <div class="admin-top-row">
            <h1 id="admin-page-heading">ADMIN</h1>
            <button id="adminCloseButton" type="button" class="admin-close-button" aria-label="Close admin">X</button>
          </div>

          <div class="admin-controls-row">
            <button id="adminSuppliersButton" type="button" class="btn-secondary">SUPPLIERS</button>
            <button id="adminChangelogButton" type="button" class="btn-secondary">CHANGELOG</button>
            <button id="adminExportSettingsButton" type="button" class="btn-secondary">EXPORT SETTINGS</button>
            <button id="adminImportSettingsButton" type="button" class="btn-secondary">IMPORT SETTINGS</button>
          </div>
          <input id="adminImportSettingsInput" type="file" accept="application/json,.json" class="hidden" />
          <p id="adminStatusText" class="help-text"></p>

          <div id="adminSectionsList" class="admin-sections-list"></div>

          <dialog id="adminChangelogDialog" class="duplicate-dialog">
            <div class="duplicate-dialog-form">
              <h3>CHANGELOG</h3>
              <div id="adminChangelogList" class="admin-changelog-list"></div>
              <div class="duplicate-dialog-actions">
                <button id="adminChangelogCloseButton" type="button">Close</button>
              </div>
            </div>
          </dialog>

          <div class="wizard-nav-row">
            <button id="adminBackButton" type="button" class="btn-secondary">Back</button>
          </div>
        </section>
      </section>

      <section id="page-suppliers" class="wizard-page hidden">
        <section class="card" aria-labelledby="suppliers-page-heading">
          <h1 id="suppliers-page-heading">SUPPLIERS</h1>

          <div class="admin-controls-row">
            <button id="suppliersEditButton" type="button" class="btn-primary">EDIT</button>
            <button id="suppliersSaveButton" type="button" class="btn-primary hidden">SAVE</button>
            <button id="suppliersCancelButton" type="button" class="btn-secondary hidden">CANCEL</button>
            <button id="suppliersAddRowButton" type="button" class="btn-secondary hidden">+ ADD ROW</button>
          </div>

          <p id="suppliersStatusText" class="help-text">Loading suppliers...</p>
          <div id="suppliersTableContainer" class="suppliers-table-container"></div>

          <div class="wizard-nav-row">
            <button id="suppliersBackButton" type="button" class="btn-secondary">Back</button>
          </div>
        </section>
      </section>
    </main>
<script>
  window.GOOGLE_MAPS_API_KEY = "AIzaSyCL97WL8m_1CWdO-se-_N3UHPCY1iepfgk";
</script>

   <script type="module" src="/src/app.js"></script>


  </body>
</html>
